(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-topic-topic"],{4940:function(t,e,i){"use strict";i.r(e);var a=i("d1b2"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},5737:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("cu-custom-header",{staticClass:"custom",attrs:{bgColor:"bg-topic-theme",isBack:!0},on:{topSearchClick:function(e){arguments[0]=e=t.$handleEvent(e),t.topSearchClick.apply(void 0,arguments)}}},[i("template",{staticClass:"text-sm location",attrs:{slot:"backText"},slot:"backText"},[i("v-uni-text",{staticClass:"cuIcon text",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseCityClick()}}},[t._v(t._s(t.curCity))])],1),i("v-uni-view",{staticClass:"action",attrs:{slot:"right"},slot:"right"},[i("v-uni-text",{staticClass:"cuIcon text",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.publish()}}},[t._v("发布")])],1)],2),i("v-uni-swiper",{staticClass:"card-swiper square-dot",attrs:{"indicator-dots":!0,circular:!0,autoplay:!0,interval:"5000",duration:"500","indicator-color":"#8799a3","indicator-active-color":"#F8D347"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.cardSwiper.apply(void 0,arguments)}}},t._l(t.topBannerList,(function(e,a){return i("v-uni-swiper-item",{key:a,class:t.cardCur==a?"cur":""},[i("v-uni-view",{staticClass:"swiper-item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.topBannerClick(e)}}},["image"!=e.type?i("v-uni-image",{attrs:{src:e.picurl,mode:"aspectFill"}}):t._e()],1)],1)})),1),i("v-uni-view",{staticClass:"grid col-4 padding-sm"},t._l(t.labelList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"padding-sm",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.labelClick(e)}}},[i("v-uni-view",{class:e.itemBgColorText},[i("v-uni-view",{staticClass:"text-lg"},[t._v(t._s(e.title))])],1)],1)})),1),i("v-uni-button",{staticStyle:{display:"flex","align-items":"center","justify-content":"center",width:"4rem",height:"4rem","background-color":"orange",color:"white","z-index":"99999",position:"fixed",left:"0",bottom:"10rem"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.allClick.apply(void 0,arguments)}}},[t._v("全部"),i("br"),t._v("分类")])],1)},n=[]},bb5c:function(t,e,i){"use strict";i.r(e);var a=i("5737"),n=i("4940");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);var l=i("f0c5"),c=Object(l["a"])(n["default"],a["b"],a["c"],!1,null,"6a30826b",null,!1,a["a"],void 0);e["default"]=c.exports},d1b2:function(t,e,i){"use strict";i("7a82");var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("14d9"),i("e9c4"),i("a434");var n=a(i("0b4e")),o=a(i("b85c")),l=a(i("2b56")),c=(a(i("b503")),{data:function(){return{pageIndex:0,background:{backgroundColor:"#F8D347"},cardCur:0,itemBgColorText:"",topBannerList:[],labelList:[],curCity:"全国",isFirstLoadData:!0,needReloadData:!0}},onReachBottom:function(){this.pageIndex++,this.reload()},onShow:function(){var t=this;o.default.getAppUsingCity(this.isFirstLoadData,(function(e){t.curCity==e&&0==t.needReloadData||(t.isFirstLoadData=!1,t.needReloadData=!1,t.reload(),t.curCity=e)}))},onLoad:function(){this.reload()},onPullDownRefresh:function(){console.log("123"),this.pageIndex=0,this.reload()},methods:{allClick:function(){n.default.openPage("/pagestopic/topiccatalog")},topSearchClick:function(){n.default.openPage("/pagestopic/search")},topBannerClick:function(t){o.default.openBannerPage(t)},reload:function(t){var e=this;console.log("isCheckLocationReal="+t),n.default.loading();for(var i=[],a=0;a<this.labelList.length;a++){var l=this.labelList[a];i.push(l.ID)}var c={action:"labellist"};c["pageindex"]=this.pageIndex,c["filteridlist"]=JSON.stringify(i),o.default.postWithLocation(c,(function(t,i){uni.stopPullDownRefresh();for(var a=t.Data.TopBanner,l=0;l<a.length;l++){var c=a[l];c.picurl=o.default.getHostFile()+c.封面}e.topBannerList=a,0==e.pageIndex&&e.labelList.splice(0),0==t.Data.LabelList.length&&(n.default.show("没有更多数据了"),e.pageIndex--),uni.stopPullDownRefresh();for(l=0;l<t.Data.LabelList.length;l++){c=t.Data.LabelList[l];c.itemBgColorText="padding radius text-center shadow-blur bg-"+n.default.randomColorText(),e.labelList.push(c)}n.default.hideLoading()}))},labelClick:function(t){console.log("123"),n.default.openPage("/pagestopic/topiclist",t)},publish:function(){var t=this;n.default.getUser(1)&&(n.default.openPage("/pagestopic/topiccomment"),uni.$once("publish_reload",(function(){t.reload()})))},chooseCityClick:function(){var t=this;l.default.getAgentCity((function(e){"全国"==e&&(n.default.openPage("../../view/chooseCity"),uni.$once("chooseCityFinished",(function(e){t.reload(!1)})))}))},cardSwiper:function(t){this.cardCur=t.detail.current}}});e.default=c}}]);