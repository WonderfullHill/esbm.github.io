(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["view-code"],{"28fc":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* uni.scss */\r\n/* 颜色变量 */\r\n/* 主要颜色 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.cu-form-group uni-picker .picker[data-v-61e6c2e9]{text-align:left}.cu-form-group uni-input[data-v-61e6c2e9]{text-align:left;border-bottom:.5px solid #eee}.concatType .nomsg[data-v-61e6c2e9]{width:100%;min-height:%?100?%;display:flex;justify-content:center;align-items:center}.concatType .cu-form-group .int[data-v-61e6c2e9]{border:none}.concatType .cu-bar[data-v-61e6c2e9]{display:flex;justify-content:flex-start;padding-right:%?25?%}.concatType .cu-bar .addCode[data-v-61e6c2e9]{margin-left:auto}.concatType .cu-bar .addConcat[data-v-61e6c2e9]{margin-left:auto}',""]),t.exports=e},"428b":function(t,e,n){var a=n("28fc");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("62628961",a,!0,{sourceMap:!1,shadowMode:!1})},4928:function(t,e,n){"use strict";n.r(e);var a=n("c162"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},a850:function(t,e,n){"use strict";var a=n("428b"),i=n.n(a);i.a},c162:function(t,e,n){"use strict";(function(t){n("7a82");var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("c7eb")),o=a(n("1da1"));n("a434"),n("14d9"),n("99af");var s={data:function(){return{modalNameADD:null,index:0,value:"",type:"QQ",isEdit:!1,itemType:{},totalType:[{name:"QQ",number:""},{name:"Phone",number:""},{name:"WeChat",number:""}],totalCode:[],picker:["QQ","Phone","WeChat"],id:""}},mounted:function(){uni.showLoading({title:" "}),this.selectCode(),this.selectType()},methods:{showModal:function(t){this.type=t.currentTarget.dataset.class,this.value=t.currentTarget.dataset.value,this.index=t.currentTarget.dataset.id,this.modalNameADD=t.currentTarget.dataset.target},hideModal:function(t){this.modalNameADD=null},enterModal:function(){if(null!=this.value&&""!=this.value&&" "!=this.value)if(this.totalType.length+1>4)uni.showToast({duration:1e3,title:"最多添加3个联系方式",icon:"none"});else{for(var e=0;e<this.totalType.length;e++)if(this.totalType[e].name==this.type){this.totalType[e].number=this.value,t.callFunction({name:"addConcat",data:{phone:this.$store.state.user.user.phone,list:this.totalType}}).then((function(t){uni.showToast({title:"修改成功~",icon:"none",duration:1500})})).catch((function(t){uni.showModal({content:"操作失败：".concat(t.message),showCancel:!1})}));break}this.value="",this.modalNameADD=null}else uni.showToast({duration:1500,title:"注意输入的格式",icon:"none"})},deleteConcat:function(t){var e=t.currentTarget.dataset.id;this.totalType.splice(e,1)},PickerChange:function(t){this.index=t.detail.value,this.type=this.picker[this.index],this.value=this.totalType[this.index].number},ChooseImage:function(){var e=this,n=this;this.totalCode.length>3?uni.showToast({title:"最多上传两张二维码",icon:"none",duration:1500}):uni.chooseImage({count:2,sizeType:["original","compressed"],sourceType:["album"],success:function(){var a=(0,o.default)((0,i.default)().mark((function a(o){var s,l,c,u,r;return(0,i.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(console.log("选择：",o),0==e.totalCode.length){a.next=19;break}if(!(e.totalCode.length<3&&e.totalCode.length+o.tempFilePaths.length<3)){a.next=16;break}console.log(o.tempFilePaths),s=0;case 5:if(!(s<o.tempFilePaths.length)){a.next=14;break}return l=o.tempFilePaths[s],c=n.$store.state.user.user.phone+Date.parse(new Date)+"code.jpg",a.next=10,t.uploadFile({filePath:l,cloudPath:c,onUploadProgress:function(t){console.log(t);Math.round(100*t.loaded/t.total)}}).then((function(t){console.log("上传：",t),n.addCode(t.tempFilePaths)}));case 10:a.sent;case 11:s++,a.next=5;break;case 14:a.next=17;break;case 16:uni.showToast({title:"最多上传两张二维码",icon:"none",duration:1500});case 17:a.next=25;break;case 19:if(!(o.tempFilePaths.length>0)){a.next=25;break}return u=o.tempFilePaths[0],r=n.$store.state.user.user.phone+Date.parse(new Date)+".jpg",a.next=24,t.uploadFile({filePath:u,cloudPath:r,onUploadProgress:function(t){console.log(t);Math.round(100*t.loaded/t.total)}}).then((function(t){console.log("上传：",t),n.addCode(t.fileID)}));case 24:a.sent;case 25:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()})},ViewImage:function(t){uni.previewImage({urls:this.totalCode,current:t.currentTarget.dataset.url})},DelImg:function(e){var n=this,a=[],i=this;a.push(e.currentTarget.dataset.url),uni.showModal({title:"提示",content:"确定要删除吗？",cancelText:"点错了",confirmText:"是的",success:function(o){o.confirm&&(n.totalCode.splice(e.currentTarget.dataset.index,1),t.callFunction({name:"deleteCode",data:{fileList:a}}).then((function(e){t.callFunction({name:"updateCode",data:{_id:i.id,codes:i.totalCode}}).then((function(t){i.selectCode(),uni.showToast({title:"已删除~",icon:"none"})})).catch((function(t){console.log(t),uni.showToast({title:"操作失败2",icon:"none"})}))})).catch((function(t){uni.showToast({title:"操作失败1",icon:"none"})})))}})},addCode:function(e){var n=this,a=[];a.push(e),n.selectCode(),console.log("imgs:",e),a=a.concat(this.totalCode),console.log("id:",this.id),uni.showLoading({title:"上传中..."}),""==this.id?t.callFunction({name:"addCode",data:{phone:this.$store.state.user.user.phone,codes:a}}).then((function(t){uni.hideLoading(),uni.showToast({title:"上传成功~",icon:"none",duration:1500})})).catch((function(t){uni.showModal({content:"操作失败：".concat(t.message),showCancel:!1})})):(console.log("this.totalCode:",a),t.callFunction({name:"updateCode",data:{_id:this.id,codes:a}}).then((function(t){n.selectCode(),uni.hideLoading(),uni.showToast({title:"上传成功~",icon:"none",duration:1500})})).catch((function(t){uni.showModal({content:"操作失败：".concat(t.message),showCancel:!1})})))},selectCode:function(){var e=this;t.callFunction({name:"selectCode",data:{phone:e.$store.state.user.user.phone}}).then((function(t){console.log("二维码",t.result),0!=t.result.data.length?(e.id=t.result.data[0]._id,e.totalCode=t.result.data[t.result.data.length-1].codes):e.totalCode=t.result.data,console.log("二维码s",e.totalCode)})).catch((function(t){uni.showModal({content:"操作失败：".concat(t.message),showCancel:!1})}))},selectType:function(){var e=this;t.callFunction({name:"selectConcat",data:{phone:e.$store.state.user.user.phone}}).then((function(t){0!=t.result.data.length&&(e.totalType=t.result.data[t.result.data.length-1].list),console.log("联系方式",t),uni.hideLoading()})).catch((function(t){uni.showModal({content:"操作失败：".concat(t.message),showCancel:!1})}))}}};e.default=s}).call(this,n("a9ff")["default"])},c385:function(t,e,n){"use strict";n.r(e);var a=n("d852"),i=n("4928");for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("a850");var s=n("f0c5"),l=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"61e6c2e9",null,!1,a["a"],void 0);e["default"]=l.exports},d852:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"concatType"},[n("cu-custom",{attrs:{bgColor:"bg-topic-theme",isBack:!0}},[n("template",{attrs:{slot:"backText"},slot:"backText"},[t._v("返回")]),n("template",{attrs:{slot:"content"},slot:"content"},[t._v("收款码")])],2),n("v-uni-view",{staticClass:"cu-bar bg-white"},[n("v-uni-view",{staticClass:"action"},[n("v-uni-text",{staticClass:"cuIcon-titles text-green"}),n("v-uni-text",{staticClass:"text-xl text-bold"},[t._v("联系方式")])],1)],1),t._l(t.totalType,(function(e,a){return n("v-uni-view",{key:a,staticClass:"cu-form-group"},[n("v-uni-view",{staticClass:"title"},[t._v(t._s(e.name))]),n("v-uni-input",{staticClass:"int",attrs:{name:"input",value:e.number,disabled:"true"}}),n("v-uni-button",{staticClass:"cu-btn bg-red shadow",attrs:{"data-id":a,"data-target":"DialogModalAdd","data-value":e.number,"data-class":e.name},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showModal.apply(void 0,arguments)}}},[t._v("修改")])],1)})),n("v-uni-view",{staticClass:"nomsg"},[0==t.totalType.length?n("v-uni-text",{staticClass:"text-grey text-sm",attrs:{"data-target":"DialogModalAdd"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showModal.apply(void 0,arguments)}}},[t._v("请添加联系方式")]):t._e(),0!=t.totalType.length?n("v-uni-text",{staticClass:"text-grey text-sm"},[t._v("最多添加3个联系方式（"+t._s(t.totalType.length)+"/3）")]):t._e()],1),n("v-uni-view",{staticClass:"cu-bar bg-white"},[n("v-uni-view",{staticClass:"action"},[n("v-uni-text",{staticClass:"cuIcon-titles text-green"}),n("v-uni-text",{staticClass:"text-xl text-bold"},[t._v("收款二维码")])],1),n("v-uni-view",{staticClass:"addCode",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ChooseImage.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"cuIcon-picfill"})],1)],1),n("v-uni-view",{staticClass:"cu-form-group"},[n("v-uni-view",{staticClass:"grid col-4 grid-square flex-sub"},t._l(t.totalCode,(function(e,a){return n("v-uni-view",{key:a,staticClass:"bg-img",attrs:{"data-url":t.totalCode[a]},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ViewImage.apply(void 0,arguments)}}},[n("v-uni-image",{attrs:{src:t.totalCode[a],mode:"aspectFill"}}),n("v-uni-view",{staticClass:"cu-tag bg-red",attrs:{"data-url":t.totalCode[a],"data-index":a},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.DelImg.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"cuIcon-close"})],1)],1)})),1)],1),n("v-uni-view",{staticClass:"nomsg"},[0==t.totalCode.length?n("v-uni-text",{staticClass:"text-grey text-sm",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ChooseImage.apply(void 0,arguments)}}},[t._v("请添加收款码")]):t._e(),0!=t.totalCode.length?n("v-uni-text",{staticClass:"text-grey text-sm"},[t._v("最多添加2个收款码（"+t._s(t.totalCode.length)+"/2）")]):t._e()],1),n("v-uni-view",{staticClass:"cu-modal",class:"DialogModalAdd"==t.modalNameADD?"show":""},[n("v-uni-view",{staticClass:"cu-dialog"},[n("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[n("v-uni-view",{staticClass:"content"},[t._v("联系方式")]),n("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideModal.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"cuIcon-close text-red"})],1)],1),n("v-uni-view",{staticClass:"padding-xl",staticStyle:{padding:"50rpx 20rpx","background-color":"#FFFFFF"}},[n("v-uni-view",{staticClass:"action",staticStyle:{"text-align":"left"}},[n("v-uni-text",{staticClass:"cuIcon-title text-green"}),n("v-uni-text",{staticClass:"text-lg"},[t._v("请先选择类型")])],1),n("v-uni-view",{staticClass:"cu-form-group margin-top"},[n("v-uni-picker",{attrs:{value:t.index,range:t.picker},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.PickerChange.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.index>-1?t.picker[t.index]:"联系方式类型"))])],1)],1),n("v-uni-view",{staticClass:"action",staticStyle:{"text-align":"left"}},[n("v-uni-text",{staticClass:"cuIcon-title text-green"}),n("v-uni-text",{staticClass:"text-lg"},[t._v("请输入")])],1),n("v-uni-view",{staticClass:"cu-form-group"},[n("v-uni-view",{staticClass:"title"},[t._v(t._s(t.type))]),n("v-uni-input",{staticStyle:{"text-align":"left"},attrs:{placeholder:"注意格式",name:"input"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)],1),n("v-uni-view",{staticClass:"cu-bar bg-white"},[n("v-uni-view",{staticClass:"action margin-0 flex-sub text-green solid-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideModal.apply(void 0,arguments)}}},[t._v("算了")]),n("v-uni-view",{staticClass:"action margin-0 flex-sub  solid-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.enterModal.apply(void 0,arguments)}}},[t._v("添加")])],1)],1)],1)],2)},i=[]}}]);